<!doctype html>
<html lang="en">
<head>
  <title>Scrollytelling demo: graph-scroll.js</title>

  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
  <meta charset="utf-8">

  <link href="https://fonts.googleapis.com/css?family=Archivo|Montserrat:400,600" rel="stylesheet">

  <link rel='stylesheet' href='./style.css' />
  <!-- <link rel='stylesheet' href='./graphic.css' /> -->
</head>
<body>

  <main class="intro">
    <div class="intro-text">
      <h1>¿Qué partidos colombianos son los más gobiernistas o anti-gobiernistas?</h1>
      <!-- <p>
        El período actual del congreso de la república es el primero en implementar una estructura formal de partidos de gobierno y de oposición. Sin embargo, incluso con el sistema
      </p>

      <ul>
        <li>John Alexis Guerra</li>
        <li>Juan José Castro Varon</li>
      </ul>
    </div> -->
    <div class="logo-holder">
      <img src="./assets/logo-uniandes.png">

      <img src="./assets/logo-cv.png">
    </div>
  </main>


  <main class="graphic">
    <div class="footer">
      Ubica el mouse sobre cada dato para ver más información.
    </div>
    <div class='graphic__prose'>

      <div class='trigger' data-step='0'>
        <div class="info">
          <h2>Los votos del Senado de la República</h2>
        </div>
      </div>

      <div class='trigger' data-step='1'>
        <div class="info">
          <p>
            Los últimos tres períodos del Senado de la República pintan una imagen interesante del estado de la política en Colombia. Con la diversidad de partidos políticos engendrada de la Constitución de 1991, puede ser difícil ubicar categóricamente los partidos en un espectro ideológico.
          </p>

          <p>
            Cada partido está representado por un color, y cada congresista representa uno de los puntos en la gráfica. Senadores notables están resaltados.
          </p>
        </div>
      </div>

      <div class='trigger' data-step='2'>
        <div class="info">
          <p>
            El número de partidos con representación en el Senado ha variado en los últimos tres períodos, fluctuando alrededor de una docena de partidos con personería jurídica.
          </p>

          <p>
            Esta estructura pluralista es similar a otros gobiernos como México o España, y en contraste a sistemas mayoritariamente bipartidistas como el británico o estadounidense.
          </p>
        </div>
      </div>

      <div class='trigger' data-step='3'>
        <div class="info">
          <p>
            <span id="CD1" class="">En 2013, Álvaro Uribe Vélez fundó el Centro Democrático.</span> El partido reunió varios políticos del uribismo así como varios disidentes del Partido Conservador y el Partido de la U.
          </p>
          <p>
            Entre sus plataformas ha sido notable por ser el único partido en declararse formalmente en oposición al Proceso de Paz firmado entre el presidente Juan Manuel Santos y las FARC.
          </p>
        </div>
      </div>

      <div class='trigger' data-step='4'>
        <div class="info">
          <p>
            Los proyectos que se debaten en el congreso pueden provenir de varias fuentes. Pueden ser de iniciativa legislativa, es decir, del congreso mismo; o de iniciativa gubernamental, es decir, del presidente (entre otras).
          </p>
          <p>
            En general, podemos medir si un congresista o partido es más gobiernista que otro cuando vota <b>SÍ</b> más veces por proyectos de <b>iniciativa gubernamental</b>. O en el caso de esta gráfica, si está ubicado más hacia la derecha.
          </p>
        </div>
      </div>

      <div class='trigger' data-step='4'>
        <div class="info">
          <p>
            Los últimos tres períodos del Senado muestran cambios graduales en los votos pro y anti gobierno. Podemos ver cómo el gobierno de <span id="TODOS1">Juan Manuel Santos logró consolidar el soporte del senado alrededor del 80%</span>. Para su segundo período, el soporte del bloque es menor.
          </p>
          <p>
            En el período 2014-2018 <span id="CD2">el Centro Democrático se consolidó como el principal partido de oposición</span> a las iniciativas del gobierno de Juan Manuel Santos.
          </p>
        </div>
      </div>

      <div class='trigger' data-step='5'>
        <!-- <div class="info"></div> -->
      </div>

    </div>
    <div class='graphic__vis'>
      

    </div>
  </main>

  <main class="text">
    <p>
      El congreso vota docenas de veces al día,  pero no todos los votos son iguales. Existen varios tipos de votos que componen la labor diaria de los congresistas. Los votos pueden ir a decidir <b>actos legislativos</b> o <b>proyectos de ley</b>, pero también pueden ser usados para decidir el día a día, como el orden de las votaciones u otras decisiones <b>procedimentales</b>. 
    </p>
    <p>
      <i>
        Para el proósito de este análisis, se han seleccionado los votos <i>no procedimentales</i>, es decir, por votos en las categorías <b>Proposiciones</b>, <b>Acto Legislativo</b>, <b>Ley Estatutaria</b>, y <b>Proyecto de Ley</b>.
      </i>
    </p>
    <div class="left">
      <p>
        El congreso no vota todo el año. En general, existen dos períodos al año en los que el congreso vota. Estos períodos corren entre el <b>20 de Julio</b> al <b>16 de Diciembre</b>, y del <b>16 de Marzo</b> al <b>20 de Junio</b>. Sin embargo, en situaciones especiales, el congreso tiene votaciones extraordinarias que extienden estos períodos. Para el propósito de este análisis, estas votaciones hacen parte del período anterior.
      </p>

      <p>
        El registro de las votaciones diarias se registra en gacetas. <b>Congreso Visible</b> ha estado en la labor de recolectar estos datos de forma constante desde 2006. El congreso colombiano vota numerosas veces al día, pero mediante la tediosa labor de digitalizar estas gacetas, se hace posible el análisis de datos de gran escala como el que se hace en esta publicación.
      </p>
    </div>
    <div class="right">
      <img class="sideImg" src="./assets/gacetas.jpg">
      <p class="legend">
        Figura: Ejemplo de una gaceta de la Cámara de Representantes.
      </p>
    </div>
    
  </main>

  <main class="graphic2">
    <div class='graphic2__prose'>

      <div class='trigger2' data-step='0'>
        <div class="info">
          <h2>¿Cómo han cambiado los votos?</h2>
        </div>
      </div>

      <div class='trigger2' data-step='1'>
        <div class="info">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
      </div>

      <div class='trigger2' data-step='2'>
        <div class="info">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
      </div>

      <div class='trigger2' data-step='3'>
        <div class="info">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
      </div>

      <div class='trigger2' data-step='4'>
        <div class="info">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
      </div>

    </div>
    <div class='graphic2__vis'>
      

    </div>
  </main>

  <main class="text">
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    
  </main>

  <script src='./d3.v4.min.js'></script>
  <script src='./graphic.js'></script>
  <script src='./graphic2.js'></script>
  <script src='./graph-scroll.js'></script> 
  
  <script>
    (function() {

      // viewport height
      var viewportHeight = window.innerHeight
      var halfViewportHeight = viewportHeight / 2 

      function graphscroll1(data, maps) {
        // select elements using d3 here since this is a d3 library...
        var graphicEl = d3.select('.graphic')
        var graphicVisEl = d3.select('.graphic__vis')
        var triggerEls = d3.selectAll('.trigger')

        // a global function creates and handles all the vis + updates
        var graphic = createGraphic(data, maps)

        // this is it, graph-scroll handles pretty much everything
        // it will automatically add class names to the elements,
        // so you just need to handle the fixed positions with css
        d3.graphScroll()
          .eventId('uniqueId1')
          .container(graphicEl)
          .graph(graphicVisEl)
          .sections(triggerEls)
          .offset(halfViewportHeight)
          .on('active', function(i) {
            graphic.update(i)
          })
      }

      function graphscroll2(partyData, personData, maps) {
        // select elements using d3 here since this is a d3 library...
        var graphicEl2 = d3.select('.graphic2')
        var graphicVisEl2 = d3.select('.graphic2__vis')
        var triggerEls2 = d3.selectAll('.trigger2')

        // a global function creates and handles all the vis + updates
        var graphic2 = createGraphic2(partyData, personData, maps)

        // this is it, graph-scroll handles pretty much everything
        // it will automatically add class names to the elements,
        // so you just need to handle the fixed positions with css
        d3.graphScroll()
          .eventId('uniqueId2')
          .container(graphicEl2)
          .graph(graphicVisEl2)
          .sections(triggerEls2)
          .offset(halfViewportHeight)
          .on('active', function(i) {
            graphic2.update(i)
          })
      }

      d3.json("ball_chart_data.json", function(errorA, data) {
        d3.json("infoMaps.json", function(errorB, maps) {
          d3.json("party_data.json", function(errorA, partyData) {
            d3.json("person_data.json", function(errorB, personData) {
              graphscroll1(data, maps);
              graphscroll2(partyData, personData, maps);
            });
          });
        });
      });

      
      

    })()
  </script>
</body>
</html>
